!function(e){var n={};function a(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=e,a.c=n,a.d=function(t,i,e){a.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(i,t){if(1&t&&(i=a(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(a.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var n in i)a.d(e,n,function(t){return i[t]}.bind(null,n));return e},a.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(i,"a",i),i},a.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},a.p="",a(a.s=3)}([function(t,i){t.exports='<h1 class="widget-title"></h1>\r\n<div class="chart-container">\r\n    <canvas class="widget-canvas chart-canvas"></canvas>\r\n    <div class="tooltip hidden">\r\n        <div class="tooltip-line"></div>\r\n        <div class="tooltip-dot-container"></div>\r\n        <div class="tooltip-popover"><div class="tooltip-date"></div><div class="y-value-container"></div></div>\r\n    </div>\r\n</div>\r\n<div class="minimap-container">\r\n    <canvas class="widget-canvas minimap-chart-canvas" style="z-index: 0;"></canvas>\r\n    <canvas class="widget-canvas minimap-overlay-canvas"></canvas>\r\n</div>\r\n<div class="chart-switcher-container"></div>\r\n'},function(t,i){t.exports='<a class="chart-switcher active" onmousedown="return false" href="javascript:void(0)">\r\n    <span class="chart-switcher-icon">\r\n        <div class="chart-switcher-icon-circle"></div>\r\n        <div class="chart-switcher-icon-inner-circle"></div>\r\n        <svg class="chart-switcher-icon-check" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M9 16.2l-3.5-3.5c-.39-.39-1.01-.39-1.4 0-.39.39-.39 1.01 0 1.4l4.19 4.19c.39.39 1.02.39 1.41 0L20.3 7.7c.39-.39.39-1.01 0-1.4-.39-.39-1.01-.39-1.4 0L9 16.2z"/></svg>\r\n    </span>\r\n    <span class="chart-switcher-text"></span>\r\n</a>\r\n'},function(t,i,e){},function(t,i,e){"use strict";e.r(i);e(2);var l=e(0),d=e(1),g=function(){function t(t){this._widgetState=t,this.isRunning=!1}return t.prototype.start=function(t,i,e){this.animTimeInMs=i,void 0!==e&&(this._targetVal=e),this.isRunning||(this._startVal=t,this._startTime=this._widgetState.lastFrameTimestamp,this.isRunning=!0)},t.prototype.getNextVal=function(t){void 0!==t&&(this._targetVal=t);var i=this._widgetState.lastFrameTimestamp-this._startTime,e=this._startVal+(this._targetVal-this._startVal)/this.animTimeInMs*i;return e===this._targetVal?(this.isRunning=!1,this._targetVal):this._startVal>this._targetVal&&e<=this._targetVal?(this.isRunning=!1,this._targetVal):this._startVal<this._targetVal&&e>=this._targetVal?(this.isRunning=!1,this._targetVal):e},t.prototype.cancel=function(){this.isRunning=!1},t}(),s=function(){function i(t,i,e,n){this.r=t,this.g=i,this.b=e,this.a=n}return i.prototype.clone=function(t){return new i(t&&void 0!==t.r?t.r:this.r,t&&void 0!==t.g?t.g:this.g,t&&void 0!==t.b?t.b:this.b,t&&void 0!==t.a?t.a:this.a)},i.prototype.toString=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.a+")"},i}();function u(t,i){void 0===i&&(i=1);var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return new s(parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16),i)}function f(t,i){return i-t.getBoundingClientRect().left}var n=function(){function t(t,i){this._widgetState=t,this._uAnimation=new g(this._widgetState),this._aAnimation=new g(this._widgetState),i&&(this._lastVal=i)}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._uAnimation.isRunning||this._aAnimation.isRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"animTimeInMs",{get:function(){return this._animTimeInMs},set:function(t){t<0&&(t=0),this._animTimeInMs=this._aAnimation.animTimeInMs=this._uAnimation.animTimeInMs=t},enumerable:!0,configurable:!0}),t.prototype.start=function(t,i,e){this._startVal=t,this._animTimeInMs=i,e&&(this._targetVal=e),this._uAnimation.start(0,i,1),this._aAnimation.start(t.a,i,e&&e.a)},t.prototype.getNextVal=function(t){if(t&&(this._targetVal=t),this.isRunning){var i=this._uAnimation.getNextVal(),e=Math.round(o(this._startVal.r,this._targetVal.r,i)),n=Math.round(o(this._startVal.g,this._targetVal.g,i)),a=Math.round(o(this._startVal.b,this._targetVal.b,i)),r=this._aAnimation.getNextVal(t&&t.a);this._lastVal=new s(e,n,a,r)}return this._lastVal},t}();function o(t,i,e){return(1-e)*t+e*i}var a=500,r=1e3,c=60,m=function(){function t(t,i){this._widgetState=t,this._height=i,this.yScaleAnimation=new g(this._widgetState),this.yScaleCurGridColorAnimation=new n(this._widgetState),this.yScaleCurLabelColorAnimation=new n(this._widgetState),this.yScalePrevGridColorAnimation=new n(this._widgetState),this.yScalePrevLabelColorAnimation=new n(this._widgetState),this.timeScaleFadeAnimation=new n(this._widgetState),this.addingTimeScaleLabels=!1,this.removingTimeScaleLabels=!1,this.unitToPx=this.unitToPx.bind(this),this.yToPx=this.yToPx.bind(this);var e=M();this.timeScaleLabelColorAnimation=new n(this._widgetState,u(e.textColor))}return Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._widgetState.widgetResized=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"timeScaleStepInPx",{get:function(){return this._widgetState.pxPerUnit*this.timeScaleStepInUnits},enumerable:!0,configurable:!0}),t.prototype.startThemeChangingAnimation=function(){var t=M(),i=u(t.textColor),e=u(t.gridLineColor);this.yScaleCurLabelColorAnimation.start(this.yScaleCurLabelColorAnimation.getNextVal(),500,i.clone()),this.yScaleCurGridColorAnimation.start(this.yScaleCurGridColorAnimation.getNextVal(),500,e.clone()),this.timeScaleLabelColorAnimation.start(this.timeScaleLabelColorAnimation.getNextVal(),500,i.clone())},t.prototype.startGridChangingAnimation=function(t){var i=M(),e=u(i.textColor),n=u(i.gridLineColor);this.currentYScaleDivides&&(this.yScalePrevLabelColorAnimation.start(e.clone(),a,e.clone({a:0})),this.yScalePrevGridColorAnimation.start(n.clone(),a,n.clone({a:0})),this.prevYScaleDivides=this.currentYScaleDivides),this.yScaleCurLabelColorAnimation.start(e.clone({a:0}),a,e.clone()),this.yScaleCurGridColorAnimation.start(n.clone({a:0}),a,n.clone()),this.currentYScaleDivides=t},t.prototype.startTimeScaleFadeAnimation=function(){var t=u(M().textColor);if(this.removingTimeScaleLabels&&this.timeScaleStepInPx<c){var i=(c-this.timeScaleStepInPx)/c*2;this.timeScaleFadeAnimation.animTimeInMs=(1-i)*r}else if(this.addingTimeScaleLabels&&this.timeScaleStepInPx>c){i=(120-this.timeScaleStepInPx)/120*2;this.timeScaleFadeAnimation.animTimeInMs=i*r}else!this.removingTimeScaleLabels&&this.timeScaleStepInPx<c?(this.removingTimeScaleLabels=!0,this.timeScaleFadeAnimation.start(t,r,t.clone({a:0}))):!this.addingTimeScaleLabels&&1<this.timeScaleStepInUnits&&this.timeScaleStepInPx>c&&(this.addingTimeScaleLabels=!0,this.timeScaleStepInUnits/=2,this.timeScaleFadeAnimation.start(t.clone({a:0}),r,t))},t.prototype.unitToPx=function(t){return(t-this._widgetState.viewPortLeftEdgeUnit)/this._widgetState.viewPortWidthInUntits*this._widgetState.width},t.prototype.pxToUnit=function(t){var i=this._widgetState;return t*i.viewPortWidthInUntits/i.width+i.viewPortLeftEdgeUnit},t.prototype.yToPx=function(i){var e=this;return function(t){return(1-t/i)*(e.height-20-45)+20}},t}(),v=function(){function t(t,i){this._widgetState=t,this._height=i,this.unitToPx=this.unitToPx.bind(this),this.yScaleAnimation=new g(t)}return Object.defineProperty(t.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this._widgetState.widgetResized=!0},enumerable:!0,configurable:!0}),t.prototype.moveFrame=function(t){var i=this._widgetState.dxToDu(t),e=this._widgetState,n=e.viewPortLeftEdgeUnit,a=e.viewPortRightEdgeUnit,r=e.viewPortWidthInUntits,s=e.unitCount,o=n-i,h=a-i;o<0?(this._widgetState.viewPortLeftEdgeUnit=0,this._widgetState.viewPortRightEdgeUnit=r):s<h?(this._widgetState.viewPortRightEdgeUnit=s,this._widgetState.viewPortLeftEdgeUnit=s-r):(this._widgetState.viewPortLeftEdgeUnit=o,this._widgetState.viewPortRightEdgeUnit=h)},t.prototype.moveLeftGrip=function(t){var i=this._widgetState,e=i.viewPortLeftEdgeUnit,n=i.viewPortRightEdgeUnit,a=i.unitCount,r=this._widgetState.dxToDu(t);(n-(e-r))/a<.1?this._widgetState.viewPortLeftEdgeUnit=n-.1*a:this._widgetState.viewPortLeftEdgeUnit-=r},t.prototype.moveRightGrip=function(t){var i=this._widgetState,e=i.viewPortLeftEdgeUnit,n=i.viewPortRightEdgeUnit,a=i.unitCount,r=this._widgetState.dxToDu(t);(n-r-e)/a<.1?this._widgetState.viewPortRightEdgeUnit=e+.1*a:this._widgetState.viewPortRightEdgeUnit-=r},t.prototype.unitToPx=function(t){return t/this._widgetState.unitCount*this._widgetState.width},t.prototype.yToPx=function(i){var e=this;return function(t){return(1-t/i)*(e.height-10)+10}},t}(),p=function(){function t(t,i,e,n){this._width=n,this.charts=[],this.minimapOverlayIsVisible=!0,this.viewPortChanged=!1,this.widgetResized=!1,this.themeChanged=!1,this.chartToggled=!1;for(var a=t.columns,r=t.types,s=t.colors,o=0;o<a.length;o++){var h=a[o],l=h[0],d=r[l],c=h.slice(1);"x"===d?(this._time=c,this.unitCount=c.length):this.charts.push({name:l,color:u(s[l]),visible:!0,yVals:c,fadeAnimation:new g(this)})}this._viewPortRightEdgeUnit=this.unitCount,this._viewPortLeftEdgeUnit=this._viewPortRightEdgeUnit-.25*this.unitCount,this.chartWindowState=new m(this,i),this.minimapState=new v(this,e)}return Object.defineProperty(t.prototype,"time",{get:function(){return this._time},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.widgetResized=!0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortLeftEdgeUnit",{get:function(){return this._viewPortLeftEdgeUnit},set:function(t){t!==this._viewPortLeftEdgeUnit&&(this._viewPortLeftEdgeUnit=t<0?0:t,this.viewPortChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortRightEdgeUnit",{get:function(){return this._viewPortRightEdgeUnit},set:function(t){t!==this._viewPortRightEdgeUnit&&(this._viewPortRightEdgeUnit=t>this.unitCount?this.unitCount:t,this.viewPortChanged=!0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"viewPortWidthInUntits",{get:function(){return this.viewPortRightEdgeUnit-this.viewPortLeftEdgeUnit},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"leftmostDisplayingPointIndex",{get:function(){var t=Math.floor(this.viewPortLeftEdgeUnit);return t+.5>this.viewPortLeftEdgeUnit?t:t+1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rightmostDisplayingPointIndex",{get:function(){var t=Math.floor(this.viewPortRightEdgeUnit);return t+.5>this.viewPortRightEdgeUnit?t-1:t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pxPerUnit",{get:function(){return this.width/this.viewPortWidthInUntits},enumerable:!0,configurable:!0}),t.prototype.getMaxYVal=function(t,i){for(var e=0,n=t;n<=i;n++)for(var a=0;a<this.charts.length;a++)if(this.charts[a].visible){var r=this.charts[a].yVals;r[n]>e&&(e=r[n])}return e},t.prototype.resetChangeFlags=function(){this.viewPortChanged=!1,this.widgetResized=!1,this.themeChanged=!1,this.chartToggled=!1},t.prototype.toggleChart=function(t){t.visible=!t.visible,t.visible?(t.color.a=0,t.fadeAnimation.start(0,300,1)):(t.color.a=1,t.fadeAnimation.start(1,300,0)),this.chartToggled=!0},t.prototype.dxToDu=function(t){return t*this.unitCount/this.width},t}();function _(t,i,e,n,a,r,s){t.lineWidth=a;for(var o=0;o<i.length;o++){var h=i[o];if(h.visible)h.fadeAnimation.isRunning&&(h.color.a=h.fadeAnimation.getNextVal());else{if(!h.fadeAnimation.isRunning)continue;h.color.a=h.fadeAnimation.getNextVal()}w(t,h,e,n,r,s)}}function w(t,i,e,n,a,r){var s=i.yVals,o=i.color;t.lineCap="round",t.lineJoin="round",t.strokeStyle=o.toString(),t.beginPath(),t.moveTo(a(e+.5),r(s[e]));for(var h=e+1;h<=n;h++){var l=a(h+.5),d=r(s[h]);t.lineTo(l,d)}t.stroke()}var S=function(){function t(t,i,e){this._overlayCanvas=i,this._widgetState=e,this._draggingFrame=!1,this._draggingLeftGrip=!1,this._draggingRightGrip=!1,this._leftGripStartX=0,this._rightGripStartX=0,this._prevX=0,this.onDragStart=this.onDragStart.bind(this),this.onDrag=this.onDrag.bind(this),this.onDragStop=this.onDragStop.bind(this),this._chartCanvasCtx=t.getContext("2d"),this._overlayCanvasCtx=i.getContext("2d"),this.subscribeEvents()}return Object.defineProperty(t.prototype,"dragging",{get:function(){return this._draggingFrame||this._draggingLeftGrip||this._draggingRightGrip},enumerable:!0,configurable:!0}),t.prototype.drawCharts=function(){var t=this._widgetState,i=t.width,e=t.unitCount,n=t.minimapState,a=t.chartWindowState,r=this._widgetState.getMaxYVal(0,this._widgetState.unitCount-1);n.lastMaxYVal=r;var s=n.yScaleAnimation.isRunning?n.yScaleAnimation.getNextVal(r):r;this._chartCanvasCtx.clearRect(0,0,i,a.height),_(this._chartCanvasCtx,this._widgetState.charts,0,e-1,1.5,n.unitToPx,n.yToPx(s))},t.prototype.redrawOverlay=function(){var t=this._overlayCanvasCtx,i=this._widgetState.minimapState.unitToPx(this._widgetState.viewPortLeftEdgeUnit),e=this._widgetState.minimapState.unitToPx(this._widgetState.viewPortRightEdgeUnit),n=i+7.5,a=e-7.5,r=this._widgetState,s=r.width,o=r.minimapState.height,h=M();t.clearRect(0,0,s,o),t.fillStyle=h.minimapOverlayColor,t.fillRect(0,0,i,o),t.fillRect(e,0,s-e,o),t.lineWidth=2,t.strokeStyle=h.mimimapFrameColor,t.beginPath(),t.moveTo(i,1),t.lineTo(e,1),t.moveTo(i,o-1),t.lineTo(e,o-1),t.stroke(),t.lineWidth=15,t.beginPath(),this._leftGripStartX=i,t.moveTo(n,2),t.lineTo(n,o-2),this._rightGripStartX=e-15,t.moveTo(a,2),t.lineTo(a,o-2),t.stroke()},t.prototype.subscribeEvents=function(){var i=this;this._overlayCanvas.addEventListener("mousedown",function(t){i.onDragStart(t.clientX,t)}),this._overlayCanvas.addEventListener("touchstart",function(t){i.onDragStart(t.changedTouches[0].clientX,t)}),this._overlayCanvas.addEventListener("touchend",this.onDragStop),window.addEventListener("mouseup",this.onDragStop),window.addEventListener("mousemove",function(t){i.onDrag(t.clientX,t)}),this._overlayCanvas.addEventListener("touchmove",function(t){i.onDrag(t.changedTouches[0].clientX,t)})},t.prototype.onDragStart=function(t,i){var e=this.checkPointerPosition(t),n=f(this._overlayCanvas,t);this._prevX=n,"InFrame"===e?(this._draggingFrame=!0,this._overlayCanvas.style.cursor="move"):"InLeftGrip"===e?(this._draggingLeftGrip=!0,this._overlayCanvas.style.cursor="e-resize"):"InRightGrip"===e&&(this._draggingRightGrip=!0,this._overlayCanvas.style.cursor="w-resize"),this.dragging&&i.cancelable&&i.preventDefault()},t.prototype.onDrag=function(t,i){if(this.dragging){i.cancelable&&i.preventDefault();var e=this._widgetState,n=e.minimapState,a=e.chartWindowState,r=f(this._overlayCanvas,t),s=this._prevX-r;this._draggingFrame?n.moveFrame(s):this._draggingLeftGrip?n.moveLeftGrip(s):this._draggingRightGrip&&n.moveRightGrip(s),this._prevX=r,a.yScaleAnimation.start(a.lastMaxYVal,300)}else{var o=this.checkPointerPosition(t);this._overlayCanvas.style.cursor="InFrame"===o?"move":"InLeftGrip"===o?"e-resize":"InRightGrip"===o?"w-resize":"default"}},t.prototype.onDragStop=function(t){t.cancelable&&t.preventDefault(),this._draggingFrame=!1,this._draggingLeftGrip=!1,this._draggingRightGrip=!1},t.prototype.checkPointerPosition=function(t){var i=f(this._overlayCanvas,t);return i>=this._leftGripStartX&&i<=this._leftGripStartX+15?"InLeftGrip":i>=this._rightGripStartX&&i<=this._rightGripStartX+15?"InRightGrip":i>this._leftGripStartX&&i<this._rightGripStartX?"InFrame":"OutsideFrame"},t}(),C=function(){function t(){this._callbacks={}}return t.prototype.subscribe=function(t,i){Array.isArray(this._callbacks[t])||(this._callbacks[t]=[]),this._callbacks[t].push(i)},t.prototype.fireEvent=function(t,i){for(var e=this._callbacks[t],n=0;n<e.length;n++)e[n](i)},t}(),y=new C,h=70,b=[2,5];function P(t,i){for(var e=function(t,i){var e=i/t,n=Math.ceil(h*e);for(;;){for(var a=0,r=b;a<r.length;a++){var s=r[a];if(n%s==0)return n}n++}}(i,t),n=[0],a=0;(a+=e)<=t;)n.push(a);return n}var x="12px sans-serif",T=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",month:"short",day:"numeric"}),E=new Intl.DateTimeFormat("en-US",{timeZone:"UTC",weekday:"short",month:"short",day:"numeric"}),L=function(){function t(t,i,e,n,a){this._chartContainer=i,this._tooltip=e,this._widgetState=n,this._widgetEventBus=a,this._prevGridYCoords=[],this._curGridYCoords=[],this.onPointerMove=this.onPointerMove.bind(this),this.onPointerOver=this.onPointerOver.bind(this),this.onPointerOut=this.onPointerOut.bind(this),this._chartCanvasCtx=t.getContext("2d"),this.subscribeEvents()}return t.prototype.drawCharts=function(){var t=this._widgetState,i=t.charts,e=t.unitCount,n=t.chartWindowState,a=t.width,r=t.leftmostDisplayingPointIndex,s=t.rightmostDisplayingPointIndex,o=n.yScaleAnimation,h=n.height,l=n.yScalePrevLabelColorAnimation,d=n.yScaleCurLabelColorAnimation,c=0===r?r:r-1,g=s===e-1?s:s+1,u=this._widgetState.getMaxYVal(c,g),m=o.isRunning?o.getNextVal(u):u;this._chartCanvasCtx.clearRect(0,0,a,h),0!==u&&(this.animateYScaleGrid(u,m),this.drawTimeScaleLabels()),n.lastMaxYVal=u,_(this._chartCanvasCtx,i,c,g,3,n.unitToPx,n.yToPx(m)),0!==u&&(l.isRunning&&this.drawYScaleGridLabels(n.prevYScaleDivides,this._prevGridYCoords,l.getNextVal().toString()),this.drawYScaleGridLabels(n.currentYScaleDivides,this._curGridYCoords,d.getNextVal().toString()));for(var v=!0,p=0;p<i.length;p++){var w=i[p];if(w.visible||w.fadeAnimation.isRunning){v=!1;break}}v&&(this._widgetEventBus.fireEvent("hideOverlay"),this.drawEmptyChartWindowMessage())},t.prototype.drawTimeScaleLabels=function(){var t=this._widgetState,i=t.time,e=t.chartWindowState,n=t.leftmostDisplayingPointIndex,a=t.rightmostDisplayingPointIndex,r=e.height,s=e.timeScaleLabelColorAnimation,o=e.timeScaleFadeAnimation,h=r-25;this._widgetState.chartWindowState.startTimeScaleFadeAnimation();var l=s.getNextVal().toString(),d=o.isRunning?o.getNextVal().toString():l;o.isRunning||(e.removingTimeScaleLabels&&(e.timeScaleStepInUnits*=2),e.addingTimeScaleLabels=!1,e.removingTimeScaleLabels=!1);var c=e.timeScaleStepInUnits;this._chartCanvasCtx.font=x,this._chartCanvasCtx.textAlign="center";for(var g=Math.ceil(n/c)*c;g<a;){var u=i[g],m=e.unitToPx(g+.5),v=g/c%2==1,p=o.isRunning&&v?d:l;this._chartCanvasCtx.fillStyle=p,this._chartCanvasCtx.fillText(this.formatTimeScaleValue(u),m,h),g+=c}},t.prototype.animateYScaleGrid=function(t,i){var e=this._widgetState.chartWindowState,n=e.height,a=e.lastMaxYVal,r=e.yScalePrevGridColorAnimation,s=e.yScaleCurGridColorAnimation;t!==a&&e.startGridChangingAnimation(P(t,n)),r.isRunning&&(this._prevGridYCoords=this.drawYScaleGrid(i,e.prevYScaleDivides,r.getNextVal().toString())),this._curGridYCoords=this.drawYScaleGrid(i,e.currentYScaleDivides,s.getNextVal().toString())},t.prototype.drawYScaleGrid=function(t,i,e){var n,a=this._widgetState,r=a.width,s=a.chartWindowState.yToPx(t),o=[];this._chartCanvasCtx.lineWidth=1,this._chartCanvasCtx.strokeStyle=e,this._chartCanvasCtx.beginPath();for(var h=0;h<i.length;h++){var l=i[h],d=(n=s(l))-n%1+.5;o.push(d),this._chartCanvasCtx.moveTo(0,d),this._chartCanvasCtx.lineTo(r,d)}return this._chartCanvasCtx.stroke(),o},t.prototype.drawYScaleGridLabels=function(t,i,e){this._chartCanvasCtx.font=x,this._chartCanvasCtx.textAlign="left",this._chartCanvasCtx.fillStyle=e;for(var n=0;n<t.length;n++){var a=t[n],r=i[n];this._chartCanvasCtx.fillText(this.formatYScaleValue(a),0,r-10)}},t.prototype.drawEmptyChartWindowMessage=function(){var t=this._widgetState,i=t.width,e=t.chartWindowState,n=M();this._chartCanvasCtx.clearRect(0,0,i,e.height),this._chartCanvasCtx.font="24px sans-serif",this._chartCanvasCtx.textAlign="center",this._chartCanvasCtx.fillStyle=n.textColor,this._chartCanvasCtx.fillText("No data",i/2,e.height/2)},t.prototype.formatYScaleValue=function(t){return 1<=t/1e6?(t/1e6).toFixed(1)+" M":1<=t/1e3?(t/1e3).toFixed(1)+" K":t.toString()},t.prototype.formatTimeScaleValue=function(t){var i=new Date(t);return T.format(i)},t.prototype.subscribeEvents=function(){var i=this;this._chartContainer.addEventListener("mousemove",function(t){i.onPointerMove(t.clientX)}),this._chartContainer.addEventListener("touchmove",function(t){t.cancelable&&t.preventDefault(),i.onPointerMove(t.changedTouches[0].clientX)}),this._chartContainer.addEventListener("mouseover",function(t){i.onPointerOver(),i.onPointerMove(t.clientX)}),this._chartContainer.addEventListener("touchstart",function(t){t.cancelable&&t.preventDefault(),i.onPointerOver(),i.onPointerMove(t.changedTouches[0].clientX)}),this._chartContainer.addEventListener("mouseout",this.onPointerOut),this._chartContainer.addEventListener("touchend",this.onPointerOut)},t.prototype.onPointerMove=function(t){var i=this._widgetState,e=i.width,n=i.charts,a=i.time,r=i.chartWindowState,s=f(this._chartContainer,t);if(!(s<0||e<=s)){var o=r.pxToUnit(s),h=Math.floor(o),l=h+.5;if(l!==this._prevHoveredUnit){var d=r.unitToPx(l);this._tooltip.style.transform="translateX("+d+"px)",this._prevHoveredUnit=l}this._tooltip.getElementsByClassName("tooltip-date")[0].innerText=E.format(a[h]);for(var c=this._tooltip.getElementsByClassName("y-value-container")[0].children,g=this._tooltip.getElementsByClassName("tooltip-dot-container")[0].children,u=0;u<n.length;u++){var m=n[u],v=g[u],p=c[u];if(m.visible){v.classList.remove("hidden"),p.classList.remove("hidden");var w=m.yVals[h],_=r.yToPx(r.lastMaxYVal)(w);v.style.transform="translateY("+_+"px)",p.getElementsByClassName("y-value-number")[0].innerText=this.formatYScaleValue(w),p.getElementsByClassName("y-value-caption")[0].innerText=m.name}else v.classList.add("hidden"),p.classList.add("hidden")}}},t.prototype.onPointerOver=function(){this._widgetState.minimapOverlayIsVisible&&this._tooltip.classList.remove("hidden")},t.prototype.onPointerOut=function(){this._tooltip.classList.add("hidden")},t}(),R=function(){function t(t,i,e){var n=this;this._widgetContainer=t,this._widgetEventBus=new C,this._widgetPartsToRedraw=new Set,this.updateCanvasSizes=this.updateCanvasSizes.bind(this),this.draw=this.draw.bind(this),this._widgetContainer.className="widget-container",this._widgetContainer.innerHTML=l.trim(),this._widgetContainer.getElementsByClassName("widget-title")[0].innerText=i,this._chartContainer=this._widgetContainer.getElementsByClassName("chart-container")[0],this._chartCanvas=this._widgetContainer.getElementsByClassName("chart-canvas")[0],this._tooltip=this._widgetContainer.getElementsByClassName("tooltip")[0],this._minimapContainer=this._widgetContainer.getElementsByClassName("minimap-container")[0],this._minimapChartCanvas=this._widgetContainer.getElementsByClassName("minimap-chart-canvas")[0],this._minimapOverlayCanvas=this._widgetContainer.getElementsByClassName("minimap-overlay-canvas")[0];var a=this._minimapChartCanvas,r=a.clientHeight,s=a.clientWidth;this._widgetState=new p(e,10,r,s),this.updateCanvasSizes();var o,h=Math.floor(c/this._widgetState.pxPerUnit);1!==h&&(h=Math.pow(2,Math.ceil((o=h,Math.log(o)/Math.LN2)))),this._widgetState.chartWindowState.timeScaleStepInUnits=h,y.subscribe("modeChanged",function(){n._widgetState.chartWindowState.startThemeChangingAnimation(),n._widgetState.themeChanged=!0}),y.subscribe("resize",this.updateCanvasSizes),this._widgetEventBus.subscribe("showOverlay",function(){n._minimapOverlayCanvas.classList.remove("hidden"),n._minimapOverlayCanvas.classList.remove("transparent"),n._widgetState.minimapOverlayIsVisible=!0}),this._widgetEventBus.subscribe("hideOverlay",function(){n._minimapOverlayCanvas.classList.add("hidden"),n._widgetState.minimapOverlayIsVisible=!1}),this._widgetEventBus.subscribe("fadeOutOverlay",function(){n._minimapOverlayCanvas.classList.add("transparent")}),this._chartWindow=new L(this._chartCanvas,this._chartContainer,this._tooltip,this._widgetState,this._widgetEventBus),this._minimap=new S(this._minimapChartCanvas,this._minimapOverlayCanvas,this._widgetState),this.addChartSwitchers(),this.initTooltip(),requestAnimationFrame(this.draw)}return t.prototype.draw=function(t){var i=this._widgetState,e=i.widgetResized,n=i.viewPortChanged,a=i.charts,r=i.themeChanged,s=i.chartToggled,o=i.chartWindowState,h=i.minimapState;this._widgetState.lastFrameTimestamp=t,this._widgetPartsToRedraw.clear(),e&&(this._widgetPartsToRedraw.add("ChartWindow"),this._widgetPartsToRedraw.add("Minimap"),this._widgetPartsToRedraw.add("MinimapOverlay")),(n||r)&&(this._widgetPartsToRedraw.add("ChartWindow"),this._widgetPartsToRedraw.add("MinimapOverlay"));for(var l=!1,d=0;d<a.length;d++)a[d].fadeAnimation.isRunning&&(l=!0);(s||l)&&(this._widgetPartsToRedraw.add("ChartWindow"),this._widgetPartsToRedraw.add("Minimap")),(o.yScaleCurGridColorAnimation.isRunning||o.yScaleCurLabelColorAnimation.isRunning||o.yScalePrevGridColorAnimation.isRunning||o.yScalePrevLabelColorAnimation.isRunning||o.timeScaleFadeAnimation.isRunning)&&this._widgetPartsToRedraw.add("ChartWindow"),(this._widgetPartsToRedraw.has("ChartWindow")||o.yScaleAnimation.isRunning)&&this._chartWindow.drawCharts(),(this._widgetPartsToRedraw.has("Minimap")||h.yScaleAnimation.isRunning)&&this._minimap.drawCharts(),this._widgetPartsToRedraw.has("MinimapOverlay")&&this._minimap.redrawOverlay(),this._widgetState.resetChangeFlags(),requestAnimationFrame(this.draw)},t.prototype.updateCanvasSizes=function(){this._widgetState.width===this._minimapContainer.clientWidth&&this._widgetState.minimapState.height===this._minimapContainer.clientHeight&&this._widgetState.chartWindowState.height===this._chartCanvas.height||(this._chartCanvas.width=this._chartContainer.clientWidth,this._widgetState.chartWindowState.height=this._chartCanvas.height=this._chartContainer.clientHeight,this._widgetState.width=this._minimapChartCanvas.width=this._minimapOverlayCanvas.width=this._minimapContainer.clientWidth,this._widgetState.minimapState.height=this._minimapChartCanvas.height=this._minimapOverlayCanvas.height=this._minimapContainer.clientHeight)},t.prototype.initTooltip=function(){for(var t=this._widgetState.charts,i=this._tooltip.getElementsByClassName("tooltip-dot-container")[0],e=this._tooltip.getElementsByClassName("y-value-container")[0],n=0;n<t.length;n++){var a=t[n],r=document.createElement("div");r.className="tooltip-dot",r.style.borderColor=a.color.toString(),i.appendChild(r);var s=document.createElement("div");s.style.color=a.color.toString();var o=document.createElement("div");o.className="y-value-number";var h=document.createElement("div");h.className="y-value-caption",s.appendChild(o),s.appendChild(h),e.appendChild(s)}},t.prototype.addChartSwitchers=function(){var n=this,t=this._widgetState,a=t.charts,r=t.chartWindowState,s=t.minimapState,o=this._widgetContainer.getElementsByClassName("chart-switcher-container")[0],i=document.createElement("div");i.innerHTML=d.trim();for(var h=i.firstChild,e=function(t){var i=a[t],e=h.cloneNode(!0);e.getElementsByClassName("chart-switcher-text")[0].innerText=i.name,e.getElementsByClassName("chart-switcher-icon-circle")[0].style.backgroundColor=i.color.toString(),e.onclick=function(){n._widgetState.toggleChart(i),0===a.filter(function(t){return t.visible}).length&&n._widgetEventBus.fireEvent("fadeOutOverlay"),i.visible?(n._widgetState.minimapOverlayIsVisible||n._widgetEventBus.fireEvent("showOverlay"),e.classList.add("active")):e.classList.remove("active"),r.yScaleAnimation.start(r.lastMaxYVal,300),s.yScaleAnimation.start(s.lastMaxYVal,300)},o.appendChild(e)},l=0;l<a.length;l++)e(l)},t}(),A={appBgColor:"white",textColor:"#96A2AA",gridLineColor:"#F2F4F5",minimapOverlayColor:"rgba(232, 244, 249, 0.6)",mimimapFrameColor:"rgba(208, 228, 242, 0.8)"},V={appBgColor:"#242F3E",textColor:"#546778",gridLineColor:"#293544",minimapOverlayColor:"rgba(0, 0, 0, 0.6)",mimimapFrameColor:"rgba(108, 128, 142, 0.8)"};e.d(i,"getCurrentTheme",function(){return M}),document.body.ontouchstart=function(t){t.stopPropagation()};var O=!(document.body.ontouchmove=function(t){t.stopPropagation()});function M(){return O?V:A}var U,G,I,N=new XMLHttpRequest;function D(){var t=document.getElementById("mode-switcher");t.innerText=O?"Switch to Day Mode":"Switch to Night Mode"}N.open("GET","/chart_data.json",!0),N.send(),N.onreadystatechange=function(){if(4==N.readyState){for(var t=JSON.parse(N.responseText),i=document.getElementById("container"),e=0,n=t;e<n.length;e++){n[e];i.appendChild(document.createElement("div"))}for(var a=0;a<t.length;a++)new R(i.children[a],"Chart "+(a+1),t[a]);D()}},document.getElementById("mode-switcher").addEventListener("click",function(){O=!O,y.fireEvent("modeChanged",O),D(),document.documentElement.className=O?"dark":""}),U="resize",I=!(G=function(){y.fireEvent("resize")}),window.addEventListener(U,function(){I||(I=!0,requestAnimationFrame(function(){G(),I=!1}))})}]);